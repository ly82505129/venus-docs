(window.webpackJsonp=window.webpackJsonp||[]).push([[99],{497:function(s,t,a){"use strict";a.r(t);var e=a(54),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"背景"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#背景"}},[s._v("#")]),s._v(" 背景")]),s._v(" "),a("p",[s._v("   venus-cluster是venus社区开发的一套filecoin网络中负责算力增长与维持的软件。相对于venus-sealer来说，在设计中将扇区状态的维护交给了venus-worker管理，venus-sector-manager负责与链交互，提供必要的服务接口，当venus-worker需要时调用。venus-sealer自身是一个中心调度器，所有worker都需注册到venus-sealer中，每有扇区阶段性任务产生时，venus-sealer根据可用资源，任务数等条件从中选择出最优的worker派发任务。venus-cluster系统中的worker是一个个独立的个体，创建新的扇区，并完成扇区的各阶段工作直到上链，仅在过程中需要某些信息时通过rpc 接口请求venus-sector-manager获得所需信息，比如创建扇区时请求最新的SectorID，ticket等。")]),s._v(" "),a("p",[s._v("   venus-cluster和venus-sealer在扇区封装方面各有优势，总的来说，venus-cluster简化了部署流程，每个worker独立自主地完成扇区的每个阶任务，降低了系统复杂性，对单台机器的性能，资源等要求较高。venus-sealer的worker部署较为灵活，一个扇区不同阶段任务可分布在多个worker完成，使资源不足的机器可以相互合作共同完成一个扇区的封装任务，但是这种部署不确定性极高，不同机器间的数据传输也有很高的不确定性，一旦出现问题，通常影响面较大，可能造成大范围的扇区任务卡死。另外，对运维技术要求较高，需要了解各阶段的用时，资源占比等。")]),s._v(" "),a("p",[s._v("   在选择独立组件时应根据自身资源选择合理的方案。本文档主要介绍venus-cluster的部署，故在后续章节有关算力增长的说明将忽略venus-sealer。")]),s._v(" "),a("h2",{attrs:{id:"部署"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#部署"}},[s._v("#")]),s._v(" 部署")]),s._v(" "),a("p",[s._v("   venus-cluster中的独立组件由venus-worker，venus-sector-manager和venus-wallet组成。")]),s._v(" "),a("ul",[a("li",[s._v("venus-worker负责扇区封装，同一扇区各阶段任务都在一个worker中完成；")]),s._v(" "),a("li",[s._v("venus-sector-manager负责windowPoSt、提供链服务；")]),s._v(" "),a("li",[s._v("venus-wallet提供签名服务。")])]),s._v(" "),a("h3",{attrs:{id:"安装-venus-wallet"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装-venus-wallet"}},[s._v("#")]),s._v(" 安装 venus-wallet")]),s._v(" "),a("p",[s._v("在后台运行"),a("code",[s._v("venus-wallet")]),s._v("模块。")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("nohup")]),s._v(" ./venus-wallet run "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" wallet.log "),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("2")]),s._v(">")]),a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("&1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n")])])]),a("p",[s._v("为"),a("code",[s._v("venus-wallet")]),s._v("设置密码。主要是为了保护钱包，在导出私钥，授权签名时需要解锁。")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ ./venus-wallet setpwd\nPassword:******\nEnter Password again:******\nPassword "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" successfully\n")])])]),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[s._v("注意")]),s._v(" "),a("p",[s._v("请备份密码并妥善保存，否则重启或锁住钱包后将无法使用相关功能。每"),a("code",[s._v("venus-wallet")]),s._v("启动时带"),a("code",[s._v("--password")]),s._v("标志会自动解锁钱包,否则启动后需要手动解锁:")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ ./venus-wallet unlock\nPassword: \n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看解锁状态")]),s._v("\n$ ./venus-wallet lock-state\nwallet state: unlocked\n")])])]),a("p",[s._v("在扇区封装的过程中需要调用wallet进行签名,如果不解锁,会导致签名失败,进而导致扇区任务失败.")])]),s._v(" "),a("p",[s._v("创建owner和worker地址。（如果没有现有的 miner ID）")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ ./venus-wallet new bls\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("OWNER_ADDRESS"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n$ ./venus-wallet new bls\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("WORKER_ADDRESS"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])])]),a("blockquote",[a("p",[s._v("如果在"),a("code",[s._v("Calibration")]),s._v("网络进行测试，则必须使用来自水龙头的测试币为您的所有地址提供资金，请使用此"),a("a",{attrs:{href:"https://faucet.calibration.fildev.network/funds.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("水龙头"),a("OutboundLink")],1),s._v("。")])]),s._v(" "),a("p",[a("em",[a("strong",[s._v("配置venus-wallet接入共享服务，使用您从链服务管理员处获得的帐号信息更改 "),a("code",[s._v("~/.venus_wallet/config.toml")]),s._v("中的"),a("code",[s._v("[APIRegisterHub]")]),s._v(" 部分")])])]),s._v(" "),a("div",{staticClass:"language-toml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-toml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token table class-name"}},[s._v("APIRegisterHub")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key property"}},[s._v("RegisterAPI")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/ip4/<IP_ADDRESS_OF_VENUS_GATEWAY>/tcp/<PORT_OF_VENUS_GATEWAY>"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key property"}},[s._v("Token")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"<AUTH_TOKEN_FOR_ACCOUNT_NAME>"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key property"}},[s._v("SupportAccounts")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"<ACCOUNT_NAME>"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])])]),a("p",[s._v("重新启动"),a("code",[s._v("venus-wallet")]),s._v("以使更改生效。")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# grep [PID] of venus-wallet process")]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -ef "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" wallet\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kill the process and restart")]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("kill")]),s._v(" -9 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("PID"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("nohup")]),s._v(" ./venus-wallet run "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" wallet.log "),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("2")]),s._v(">")]),a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("&1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n")])])]),a("p",[s._v("如成功连接 "),a("code",[s._v("venus-gateway")]),s._v("，您将看到以下日志。")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v("-07-12T15:14:12.457+0800    INFO    wallet_event    wallet_event/listenevent.go:197 connect to server fcf714b2-eeb6-498b-aafc-5e58eccd9d0f  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"api hub"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/ip4/<IP_ADDRESS>/tcp/45132"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("blockquote",[a("p",[s._v("建议使用"),a("code",[s._v("systemd")]),s._v("或"),a("code",[s._v("supervisord")]),s._v("等控制自动重启。")])]),s._v(" "),a("h3",{attrs:{id:"安装-venus-sector-manager"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装-venus-sector-manager"}},[s._v("#")]),s._v(" 安装 venus-sector-manager")]),s._v(" "),a("h4",{attrs:{id:"全局-flag"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#全局-flag"}},[s._v("#")]),s._v(" 全局 flag")]),s._v(" "),a("p",[s._v("   venus-sector-manager 具备两个全局 flag，分别是：")]),s._v(" "),a("ul",[a("li",[s._v("home：数据目录，用来保存本地数据，默认位于 "),a("code",[s._v("~/.venus-sector-manager")])]),s._v(" "),a("li",[s._v("net：用于选择加入的 Filecoin 网络，默认 "),a("code",[s._v("mainnet")]),s._v(", 可选项: "),a("code",[s._v("mainnet")]),s._v("，"),a("code",[s._v("testnetnet")]),s._v("，"),a("code",[s._v("2k")]),s._v("，"),a("code",[s._v("cali")]),s._v("，"),a("code",[s._v("forcenet")]),s._v("。")])]),s._v(" "),a("p",[s._v("   初始化venus-sector-manager。")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v(" ./venus-sector-manager --net"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("forcenet daemon init\n")])])]),a("p",[s._v("生成的初始配置文件"),a("code",[s._v("~/.venus-sector-manager/sector-manager.cfg")]),s._v("内容：")]),s._v(" "),a("div",{staticClass:"language-toml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-toml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Default config:")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token table class-name"}},[s._v("SectorManager")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  PreFetch = true")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  [[SectorManager.Miners]]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#    ID = 10000")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#    InitNumber = 0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#    MaxNumber = 10000")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#    Disabled = false")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token table class-name"}},[s._v("Commitment")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  [Commitment.DefaultPolicy]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#    CommitBatchThreshold = 0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#    CommitBatchMaxWait = "0s"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#    CommitCheckInterval = "0s"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#    EnableBatchProCommit = false")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#    PreCommitBatchThreshold = 0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#    PreCommitBatchMaxWait = "0s"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#    PreCommitCheckInterval = "0s"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#    EnableBatchPreCommit = false")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#    PreCommitGasOverEstimation = 0.0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#    ProCommitGasOverEstimation = 0.0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#    BatchPreCommitGasOverEstimation = 0.0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#    BatchProCommitGasOverEstimation = 0.0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#    MaxPreCommitFeeCap = ""')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#    MaxProCommitFeeCap = ""')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#    MaxBatchPreCommitFeeCap = ""')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#    MaxBatchProCommitFeeCap = ""')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#    MsgConfidence = 0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  [Commitment.Miners]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#    [Commitment.Miners.example]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#      [Commitment.Miners.example.Controls]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#        PreCommit = ""')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#        ProveCommit = ""')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token table class-name"}},[s._v("Chain")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#  Api = ""')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#  Token = ""')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token table class-name"}},[s._v("Messager")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#  Api = ""')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#  Token = ""')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token table class-name"}},[s._v("PersistedStore")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#  Includes = ["unavailable"]')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  [[PersistedStore.Stores]]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#    Name = "storage name,like `100.100.10.1`"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#    Path = "/path/to/storage/"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#    Strict = false")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#    ReadOnly = true")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token table class-name"}},[s._v("PoSt")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  [PoSt.Default]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#    StrictCheck = false")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#    GasOverEstimation = 0.0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#    MaxFeeCap = ""')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#    MsgCheckInteval = "1m0s"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#    MsgConfidence = 5")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  [PoSt.Actors]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#    [PoSt.Actors.10000]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#      Sender = "t1abjxfbp274xpdqcpuaykwkfb43omjotacm2p3za"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#      StrictCheck = false")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#      GasOverEstimation = 0.0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#      MaxFeeCap = ""')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#      MsgCheckInteval = "1m0s"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#      MsgConfidence = 5")]),s._v("\n")])])]),a("p",[s._v("将链服务配置更新到"),a("code",[s._v("sector-manager.cfg")]),s._v("：")]),s._v(" "),a("div",{staticClass:"language-toml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-toml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token table class-name"}},[s._v("Chain")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token key property"}},[s._v("Api")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/ip4/<IP_ADDRESS_OF_VENUS>/tcp/<PORT_OF_VENUS>"')]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token key property"}},[s._v("Token")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"AUTH_TOKEN_FOR_ACCOUNT_NAME"')]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token table class-name"}},[s._v("Messager")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token key property"}},[s._v("Api")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/ip4/<IP_ADDRESS_OF_VENUS_MESSAGER>/tcp/<PORT_OF_VENUS_MESSAGER>"')]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token key property"}},[s._v("Token")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"AUTH_TOKEN_FOR_ACCOUNT_NAME"')]),s._v("\n")])])]),a("h4",{attrs:{id:"创建矿工"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建矿工"}},[s._v("#")]),s._v(" 创建矿工")]),s._v(" "),a("p",[s._v("   如果已有矿工，可略过此步骤。")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ ./venus-sector-manager --net"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("forcenet util miner create --from"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("t3skelnvntu5m7kb656jfvr5dfy663aru76c6pxqp4qf6madrm7s4db77ysasefohdjypmoumc3niug6xmcxuq --sector-size"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("512MiB \n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v("-09-28T16:11:20.168+0800    DEBUG   policy  policy/const.go:18      NETWORK SETUP   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"name"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"forcenet"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v("-09-28T16:11:20.185+0800    INFO    sealer  internal/util_miner.go:250      "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wait")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" message receipt        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"size"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"512MiB"')]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"from"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"t3skelnvntu5m7kb656jfvr5dfy663aru76c6pxqp4qf6madrm7s4db77ysasefohdjypmoumc3niug6xmcxuq"')]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"actor"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"t01032"')]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mid"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"bafy2bzaceb66tlt744zjrq6bvtziinlsi7vajlyux6t3rnzxx4sfjeupxliha"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v("-09-28T16:11:50.189+0800    INFO    sealer  internal/util_miner.go:268      msg state: FillMsg      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"size"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"512MiB"')]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"from"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"t3skelnvntu5m7kb656jfvr5dfy663aru76c6pxqp4qf6madrm7s4db77ysasefohdjypmoumc3niug6xmcxuq"')]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"actor"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"t01032"')]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mid"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"bafy2bzaceb66tlt744zjrq6bvtziinlsi7vajlyux6t3rnzxx4sfjeupxliha"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v("-09-28T16:11:50.189+0800    INFO    sealer  internal/util_miner.go:250      "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wait")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" message receipt        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"size"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"512MiB"')]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"from"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"t3skelnvntu5m7kb656jfvr5dfy663aru76c6pxqp4qf6madrm7s4db77ysasefohdjypmoumc3niug6xmcxuq"')]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"actor"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"t01032"')]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mid"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"bafy2bzaceb66tlt744zjrq6bvtziinlsi7vajlyux6t3rnzxx4sfjeupxliha"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v("-09-28T16:12:20.192+0800    INFO    sealer  internal/util_miner.go:268      msg state: FillMsg      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"size"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"512MiB"')]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"from"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"t3skelnvntu5m7kb656jfvr5dfy663aru76c6pxqp4qf6madrm7s4db77ysasefohdjypmoumc3niug6xmcxuq"')]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"actor"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"t01032"')]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mid"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"bafy2bzaceb66tlt744zjrq6bvtziinlsi7vajlyux6t3rnzxx4sfjeupxliha"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v("-09-28T16:12:20.192+0800    INFO    sealer  internal/util_miner.go:250      "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wait")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" message receipt        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"size"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"512MiB"')]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"from"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"t3skelnvntu5m7kb656jfvr5dfy663aru76c6pxqp4qf6madrm7s4db77ysasefohdjypmoumc3niug6xmcxuq"')]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"actor"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"t01032"')]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mid"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"bafy2bzaceb66tlt744zjrq6bvtziinlsi7vajlyux6t3rnzxx4sfjeupxliha"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v("-09-28T16:12:50.195+0800    INFO    sealer  internal/util_miner.go:274      message landed on chain "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"size"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"512MiB"')]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"from"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"t3skelnvntu5m7kb656jfvr5dfy663aru76c6pxqp4qf6madrm7s4db77ysasefohdjypmoumc3niug6xmcxuq"')]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"actor"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"t01032"')]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mid"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"bafy2bzaceb66tlt744zjrq6bvtziinlsi7vajlyux6t3rnzxx4sfjeupxliha"')]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"smcid"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"bafy2bzacecejxxqdtzyyrivhc2h4pqjdfr43dwlwbbtd7kxzbbiixzmsl6k52"')]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"height"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("92099")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v("-09-28T16:12:50.195+0800    INFO    sealer  internal/util_miner.go:285      miner actor: t01033 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("t2sqliwznayjwcjke6ypex3ox5lajcwpasg7wc2fi"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"size"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"512MiB"')]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"from"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"t3skelnvntu5m7kb656jfvr5dfy663aru76c6pxqp4qf6madrm7s4db77ysasefohdjypmoumc3niug6xmcxuq"')]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"actor"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"t01032"')]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mid"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"bafy2bzaceb66tlt744zjrq6bvtziinlsi7vajlyux6t3rnzxx4sfjeupxliha"')]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"smcid"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"bafy2bzacecejxxqdtzyyrivhc2h4pqjdfr43dwlwbbtd7kxzbbiixzmsl6k52"')]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"height"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("92099")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("p",[s._v("至此矿工创建成功，矿工号为：t01033，查看该矿工信息：")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ ./venus-sector-manager --net"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("forcenet util miner info t01033\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v("-09-28T16:19:19.236+0800    DEBUG   policy  policy/const.go:18      NETWORK SETUP   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"name"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"forcenet"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\nMiner: t01033\nOwner: t01032\nWorker: t01032\nNewWorker: "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("empty"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\nControls"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(":\nWokerChangeEpoch: -1\nMultiaddrs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(":\nSectorSize: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("536870912")]),s._v("\nWindowPoStPartitionSectors: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n")])])]),a("h4",{attrs:{id:"启动服务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#启动服务"}},[s._v("#")]),s._v(" 启动服务")]),s._v(" "),a("p",[s._v("   目前，miner的一些必要信息需要手动配置，暂时无法自动获取。")]),s._v(" "),a("ul",[a("li",[s._v("矿工号，sector id范围")])]),s._v(" "),a("div",{staticClass:"language-toml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-toml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token table class-name"}},[s._v("SectorManager.Miners")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token key property"}},[s._v("ID")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1033")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 矿工id，eg。 t01033 -> 1033 ")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token key property"}},[s._v("InitNumber")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# min sid ")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token key property"}},[s._v("MaxNumber")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10000")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# max sid")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token key property"}},[s._v("Disabled")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# false: 做算力; true:仅维持算力")]),s._v("\n")])])]),a("ul",[a("li",[s._v("P2,C2消息的from配置")])]),s._v(" "),a("div",{staticClass:"language-toml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-toml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token table class-name"}},[s._v("Commitment.Miners")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token table class-name"}},[s._v("Commitment.Miners.1033")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token table class-name"}},[s._v("Commitment.Miners.1033.Controls")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token key property"}},[s._v("PreCommit")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 根据实际需求配置钱包地址")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token key property"}},[s._v("ProveCommit")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 根据实际需求配置钱包地址")]),s._v("\n")])])]),a("ul",[a("li",[s._v("永久存储路径配置")])]),s._v(" "),a("div",{staticClass:"language-toml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-toml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token table class-name"}},[s._v("PersistedStore.Stores")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token key property"}},[s._v("Name")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"store-f01033"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 自己起的名称")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token key property"}},[s._v("Path")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 绝对路径")]),s._v("\n")])])]),a("ul",[a("li",[s._v("wdPoSt配置")])]),s._v(" "),a("div",{staticClass:"language-toml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-toml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token table class-name"}},[s._v("PoSt.Actors")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token table class-name"}},[s._v("PoSt.Actors.1033")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token key property"}},[s._v("Sender")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 根据实际需求配置钱包地址")]),s._v("\n")])])]),a("p",[s._v("确保以上信息都配置无误后启动服务:")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("nohup")]),s._v(" ./venus-sector-manager daemon run  --listen"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:1789 --poster"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("2")]),s._v(">")]),a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("&1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" manager.log "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n")])])]),a("p",[a("code",[s._v("--poster")]),s._v("设置为true表示做windowPoSt,设置为false不做windowPoSt.")]),s._v(" "),a("p",[s._v("刚启动时会将配置信息输出到日志:")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('021-09-28T16:51:03.850+0800    INFO    dep     dep/sealer_constructor.go:69    Sector-manager initial cfg: [SectorManager]\n  PreFetch = true\n\n  [[SectorManager.Miners]]\n    ID = 1033\n    InitNumber = 0\n    MaxNumber = 10000\n    Disabled = false\n\n[Commitment]\n  [Commitment.DefaultPolicy]\n    CommitBatchThreshold = 0\n    CommitBatchMaxWait = "0s"\n    CommitCheckInterval = "0s"\n    EnableBatchProCommit = false\n    PreCommitBatchThreshold = 0\n    PreCommitBatchMaxWait = "0s"\n    PreCommitCheckInterval = "0s"\n    EnableBatchPreCommit = false\n    PreCommitGasOverEstimation = 0.0\n    ProCommitGasOverEstimation = 0.0\n    BatchPreCommitGasOverEstimation = 0.0\n    BatchProCommitGasOverEstimation = 0.0\n    MaxPreCommitFeeCap = ""\n    MaxProCommitFeeCap = ""\n    MaxBatchPreCommitFeeCap = ""\n    MaxBatchProCommitFeeCap = ""\n    MsgConfidence = 0\n  [Commitment.Miners]\n    [Commitment.Miners.1033]\n      [Commitment.Miners.1033.Controls]\n        PreCommit = "t3skelnvntu5m7kb656jfvr5dfy663aru76c6pxqp4qf6madrm7s4db77ysasefohdjypmoumc3niug6xmcxuq"\n        ProveCommit = "t3skelnvntu5m7kb656jfvr5dfy663aru76c6pxqp4qf6madrm7s4db77ysasefohdjypmoumc3niug6xmcxuq"\n    [Commitment.Miners.example]\n      [Commitment.Miners.example.Controls]\n        PreCommit = ""\n        ProveCommit = ""\n\n[Chain]\n  Api = "/ip4/192.168.200.12/tcp/3453"\n  Token = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoibGl0YW8wNCIsInBlcm0iOiJzaWduIiwiZXh0IjoiIn0.rezCJILQkXw0hZrCYdyVVX_dB2ZqqlXWCk4izAqnld8"\n\n[Messager]\n  Api = "/ip4/192.168.200.12/tcp/39812"\n  Token = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoibGl0YW8wNCIsInBlcm0iOiJzaWduIiwiZXh0IjoiIn0.rezCJILQkXw0hZrCYdyVVX_dB2ZqqlXWCk4izAqnld8"\n\n[PersistedStore]\n  Includes = []\n\n  [[PersistedStore.Stores]]\n    Name = "store-f01033"\n    Path = "/mnt/test"\n    Strict = false\n    ReadOnly = false\n\n[PoSt]\n  [PoSt.Default]\n    StrictCheck = false\n    GasOverEstimation = 0.0\n    MaxFeeCap = ""\n    MsgCheckInteval = "1m0s"\n    MsgConfidence = 5\n  [PoSt.Actors]\n    [PoSt.Actors.1033]\n      Sender = "t3skelnvntu5m7kb656jfvr5dfy663aru76c6pxqp4qf6madrm7s4db77ysasefohdjypmoumc3niug6xmcxuq"\n\n\n2021-09-28T16:51:03.859+0800    INFO    badger  v2@v2.2007.2/logger.go:46       All 0 tables opened in 0s\n        {"path": "/home/ipfs/.venus-sector-manager/meta"}\n2021-09-28T16:51:03.860+0800    DEBUG   kv      kvstore/prefix_wrapper.go:26    kv wrapped      {"prefix": "sector-number/", "prefix-len": 14}\n2021-09-28T16:51:03.863+0800    INFO    badger  v2@v2.2007.2/logger.go:46       All 0 tables opened in 0s\n        {"path": "/home/ipfs/.venus-sector-manager/offline_meta"}\n2021-09-28T16:51:03.863+0800    DEBUG   kv      kvstore/prefix_wrapper.go:26    kv wrapped      {"prefix": "sector-states/", "prefix-len": 14}\n2021-09-28T16:51:03.863+0800    DEBUG   kv      kvstore/prefix_wrapper.go:26    kv wrapped      {"prefix": "sector-states-offline/", "prefix-len": 22}\n2021-09-28T16:51:03.870+0800    INFO    badger  v2@v2.2007.2/logger.go:46       All 0 tables opened in 0s\n        {"path": "/home/ipfs/.venus-sector-manager/sector-index"}\n2021-09-28T16:51:03.872+0800    INFO    confmgr confmgr/local_mgr.go:133        will reload sector-manager(/home/ipfs/.venus-sector-manager/sector-manager.cfg) once receive reload sig\n2021-09-28T16:51:03.872+0800    INFO    confmgr confmgr/local_mgr.go:49 local conf mgr start\n2021-09-28T16:51:03.874+0800    INFO    dep     dep/sealer_constructor.go:215   miner info pre-fetched  {"miner": "1033"}\n2021-09-28T16:51:03.874+0800    INFO    sealer  venus-sector-manager/server.go:38       daemon running\n2021-09-28T16:51:03.874+0800    INFO    sealer  venus-sector-manager/server.go:31       trying to listen on 0.0.0.0:1789\n')])])]),a("h3",{attrs:{id:"安装-venus-worker"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装-venus-worker"}},[s._v("#")]),s._v(" 安装 venus-worker")]),s._v(" "),a("h4",{attrs:{id:"准备-cgroup"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#准备-cgroup"}},[s._v("#")]),s._v(" 准备 cgroup")]),s._v(" "),a("blockquote",[a("p",[s._v("如果不想使用限核功能，这步可以略过")])]),s._v(" "),a("p",[s._v("由于 venus-worker 允许使用者启动子进程形态的 sealing 单步处理器，并通过 cgroup 对这些子进程进行资源管理，因此需要通过执行以下命令获得 cgroup 的相关操作权限：")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("./create-cgroup.sh\n")])])]),a("p",[s._v("注意：此脚本将为特定的 cgroup 资源组分配当前用户的执行权限。这也就意味着，如果使用者打算用特定的用户启动 venus-cluster，需要先切换到目标用户再执行脚本。")]),s._v(" "),a("h4",{attrs:{id:"准备seal目录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#准备seal目录"}},[s._v("#")]),s._v(" 准备seal目录")]),s._v(" "),a("p",[s._v("本地目录用于保存 "),a("code",[s._v("PoRep")]),s._v(" 过程中产生的文件。"),a("code",[s._v("venus-worker")]),s._v(" 的设计理念是"),a("em",[s._v("按需配置")]),s._v("， 即配置与计算资源相匹配的本地存储资源，以让所有活跃中的扇区能够相互独立、并行不悖。")]),s._v(" "),a("p",[s._v("使用者通过以下方式来初始化将要使用的本地目录：")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("./venus-worker store seal-init -l [<path/to/local/store1> <path/to/local/store2> <path/to/local/store3>]\n")])])]),a("p",[s._v("这里可以设置多个路径，多少个路径代表可同时做多少个sector，如创建一个sector选择的路径<path/to/local/store1>，则这个sector的所有临时文件都在此目录。执行后目录结构变化如下：")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("$ ls -al seal/\ntotal 16\ndrwxrwxr-x 4 ipfs ipfs 4096 Sep 28 17:10 .\ndrwxr-xr-x 8 ipfs ipfs 4096 Sep 28 17:04 ..\ndrwxrwxr-x 4 ipfs ipfs 4096 Sep 28 17:10 seal_01\ndrwxrwxr-x 4 ipfs ipfs 4096 Sep 28 17:10 seal_02\n\n$ ls -al seal/seal_01\ntotal 16\ndrwxrwxr-x 4 ipfs ipfs 4096 Sep 28 17:10 .\ndrwxrwxr-x 4 ipfs ipfs 4096 Sep 28 17:10 ..\ndrwxrwxr-x 2 ipfs ipfs 4096 Sep 28 17:10 data\n-rw-rw-r-- 1 ipfs ipfs    0 Sep 28 17:10 .holder\ndrwxrwxr-x 2 ipfs ipfs 4096 Sep 28 17:10 meta\n")])])]),a("h4",{attrs:{id:"配置store目录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置store目录"}},[s._v("#")]),s._v(" 配置store目录")]),s._v(" "),a("p",[s._v("持久化目录用于保存 "),a("code",[s._v("PoRep")]),s._v(" 的结果文件。")]),s._v(" "),a("p",[s._v("常见的做法是将存储服务器的对应目录挂载到本地。为了避免在丢失挂载点的情况下启动，也需要对持久化目录进行初始化。")]),s._v(" "),a("p",[s._v("具体做法是在成功挂载之后，通过以下方式来初始化持久化目录：")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("./venus-worker store file-init -l <path/to/remote/store>\n")])])]),a("p",[s._v("执行后会在目录变化：")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("ls -al <path/to/remote/store>\ntotal 8\ndrwxrwxrwx 2 ipfs ipfs 4096 Sep 28 17:12 .\ndrwxr-xr-x 3 root root 4096 Sep 28 16:26 ..\n-rw-rw-r-- 1 ipfs ipfs    0 Sep 28 17:12 .holder\n")])])]),a("h4",{attrs:{id:"准备配置文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#准备配置文件"}},[s._v("#")]),s._v(" 准备配置文件")]),s._v(" "),a("p",[s._v("配置文件使用 toml 格式")]),s._v(" "),a("div",{staticClass:"language-toml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-toml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# venus-sector-manager 的服务地址")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token table class-name"}},[s._v("sealer_rpc")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key property"}},[s._v("url")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ws://127.0.0.1:1789/rpc/v0"')]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# sealing 过程配置")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token table class-name"}},[s._v("sealing")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 是否接受扇区内包含订单")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key property"}},[s._v("enable_deals")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 对于 sealing 过程中的临时性异常，允许自动重试的次数")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key property"}},[s._v("max_retries")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 本地目录配置，按照实际情况配置，需初始化")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token table class-name"}},[s._v("store")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key property"}},[s._v("location")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"<path/to/local/store1>"')]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token table class-name"}},[s._v("store")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key property"}},[s._v("location")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"<path/to/local/store2>"')]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token table class-name"}},[s._v("store")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key property"}},[s._v("location")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"<path/to/local/store3>"')]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 各阶段并行任务数量配置")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token table class-name"}},[s._v("limit")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# pc1 阶段的并发数量控制")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 仅在一些特定的场景下进行配置，如计算资源少于按照存储资源所需的数量")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# pc1 = 1")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token key property"}},[s._v("pc2")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key property"}},[s._v("c2")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 持久化目录配置，按照实际情况配置，需初始化")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token table class-name"}},[s._v("remote")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key property"}},[s._v("path")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"<path/to/remote/store>"')]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# pc2 子进程处理器相关配置")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token table class-name"}},[s._v("processors.pc2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动子进程处理器")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key property"}},[s._v("external")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# [[processors.pc2.subs]]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# [processors.pc2.subs.cgroup]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# cpuset = "24-27"')]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# [[processors.pc2.subs]]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# [processors.pc2.subs.cgroup]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# cpuset = "28-31"')]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# c2 子进程处理器相关配置")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token table class-name"}},[s._v("processors.c2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动子进程处理器")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key property"}},[s._v("external")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 子进程可使用的处理器核心,如果前面限核没有配置，则此处也不配置")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# [[processors.c2.subs]]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# [processors.c2.subs.cgroup]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# cpuset = "32-47"')]),s._v("\n")])])]),a("p",[s._v("启动服务")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("RUST_LOG")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("debug "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("TMPDIR")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("./ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("nohup")]),s._v(" ./venus-worker daemon --config"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("./venus-worker.toml "),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("2")]),s._v(">")]),a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("&1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" worker.log "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n")])])])])}),[],!1,null,null,null);t.default=n.exports}}]);